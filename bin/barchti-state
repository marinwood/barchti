#!/bin/bash

# Manage persistent state files for bArchTi toggles and settings.
# Usage: barchti-state <set|clear> <state-name-or-pattern>
# Used to track whether features like suspend, idle lock, etc are enabled or disabled.

STATE_DIR="$HOME/.local/state/barchti"
mkdir -p "$STATE_DIR"

COMMAND="$1"
STATE_NAME="$2"

if [[ -z $COMMAND ]]; then
  echo "Usage: barchti-state <set|clear> <state-name-or-pattern>"
  exit 1
fi

if [[ -z $STATE_NAME ]]; then
  echo "Usage: barchti-state $COMMAND <state-name>"
  exit 1
fi

case "$COMMAND" in
set) touch "$STATE_DIR/$STATE_NAME" ;;
clear) find "$STATE_DIR" -maxdepth 1 -type f -name "$STATE_NAME" -delete ;;
esac
