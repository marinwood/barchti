#!/bin/bash

# Creates a new bArchTi migration named after the unix timestamp of the last commit.
# Only intended for bArchTi developers.

cd ~/.local/share/barchti
migration_file="$HOME/.local/share/barchti/migrations/$(git log -1 --format=%cd --date=unix).sh"
touch $migration_file

if [[ $1 != "--no-edit" ]]; then
  nvim $migration_file
fi

echo $migration_file
